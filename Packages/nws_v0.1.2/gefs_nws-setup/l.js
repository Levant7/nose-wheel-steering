var d=document,h=d.getElementsByTagName('head')[0],s=d.createElement('script');s.onload=function(){this.parentNode.removeChild(this)};s.textContent='!function(){var controlEvents={keyDown:function(event){var keys=ges.preferences.keyboard.keys;switch(event.which){case keys["Bank left"].keycode:return controls.states.left=!0,event.returnValue=!1,controls.keyboard.override=!0,void 0;case keys["Bank right"].keycode:return controls.states.right=!0,event.returnValue=!1,controls.keyboard.override=!0,void 0;case keys["Pitch down"].keycode:return controls.states.up=!0,event.returnValue=!1,controls.keyboard.override=!0,void 0;case keys["Pitch up"].keycode:return controls.states.down=!0,event.returnValue=!1,controls.keyboard.override=!0,void 0;case keys["Steer left"].keycode:return controls.states.rudderLeft=!0,event.returnValue=!1,void 0;case keys["Steer right"].keycode:return controls.states.rudderRight=!0,event.returnValue=!1,void 0;case keys["Increase throttle"].keycode:case keys.PgUp.keycode:return controls.states.increaseThrottle=!0,event.returnValue=!1,void 0;case keys["Decrease throttle"].keycode:case keys.PgDwn.keycode:return controls.states.decreaseThrottle=!0,event.returnValue=!1,void 0;case keys.Brakes.keycode:return controls.setters.setBrakes.set(),void 0;case keys["Parking brake"].keycode:return controls.setters.toggleParkingBrake.set(),void 0;case keys["Engine switch (on/off)"].keycode:var aircraft=ges.aircraft;return aircraft.engine.on?aircraft.stopEngine():aircraft.startEngine(),void 0;case keys["Gear toggle (up/down)"].keycode:return controls.setters.setGear.set(),void 0;case keys["Lower flaps"].keycode:return controls.setters.setFlapsDown.set(),void 0;case keys["Raise flaps"].keycode:return controls.setters.setFlapsUp.set(),void 0;case keys["Airbrake toggle (on/off)"].keycode:return controls.setters.setAirbrakes.set(),void 0;case keys["Elevator trim up"].keycode:return controls.setters.setElevatorTrimUp.set(),void 0;case keys["Elevator trim down"].keycode:return controls.setters.setElevatorTrimDown.set(),void 0;case keys["Elevator trim neutral"].keycode:return controls.setters.setElevatorTrimNeutral.set(),void 0;case 13:return controls.recenterKeyboard(),void 0;case 27:return flight.recorder.playing&&(flight.recorder.exitPlayback(),event.preventDefault()),void 0;case 86:return flight.recorder.enterPlayback(),void 0;case 65:return controls.autopilot.toggle(),void 0;case 83:return audio.toggleMute(),void 0;case 80:return ges.togglePause(),void 0;case 67:return camera.cycle(),void 0;case 78:return ui.toggleMap(),void 0;case 79:return ges.togglePreferencesPanel(),void 0;case 9:return ges.flyToCamera(),void 0;case 72:return instruments.toggle(),void 0;case 77:return controls.setMode("mouse"),void 0;case 75:return controls.setMode("keyboard"),void 0;case 74:return controls.setMode("joystick"),void 0;case 82:return ges.resetFlight(),void 0;case 101:return camera.setToNeutral(),void 0;case 97:return camera.setRotation(45),void 0;case 98:return camera.setRotation(0),void 0;case 99:return camera.setRotation(-45),void 0;case 100:return camera.setRotation(90),void 0;case 102:return camera.setRotation(-90),void 0;case 103:return camera.setRotation(135),void 0;case 104:return camera.setRotation(180),void 0;case 105:return camera.setRotation(-135),void 0;case 90:return controls.states.steerLeft=!0,event.returnValue=!1,void 0;case 88:return controls.states.steerRight=!0,event.returnValue=!1,void 0}event.which>47&&event.which<58&&(controls.throttle=(event.which-48)/9)},keyUp:function(event){switch(event.which){case ges.preferences.keyboard.keys["Bank left"].keycode:controls.states.left=!1,event.returnValue=!1;break;case ges.preferences.keyboard.keys["Bank right"].keycode:controls.states.right=!1,event.returnValue=!1;break;case ges.preferences.keyboard.keys["Pitch down"].keycode:controls.states.up=!1,event.returnValue=!1;break;case ges.preferences.keyboard.keys["Pitch up"].keycode:controls.states.down=!1,event.returnValue=!1;break;case ges.preferences.keyboard.keys["Steer left"].keycode:controls.states.rudderLeft=!1,event.returnValue=!1;break;case ges.preferences.keyboard.keys["Steer right"].keycode:controls.states.rudderRight=!1,event.returnValue=!1;break;case ges.preferences.keyboard.keys["Increase throttle"].keycode:case ges.preferences.keyboard.keys.PgUp.keycode:controls.states.increaseThrottle=!1,event.returnValue=!1;break;case ges.preferences.keyboard.keys["Decrease throttle"].keycode:case ges.preferences.keyboard.keys.PgDwn.keycode:controls.states.decreaseThrottle=!1,event.returnValue=!1;break;case ges.preferences.keyboard.keys["Elevator trim up"].keycode:controls.setters.setElevatorTrimUp.unset();break;case ges.preferences.keyboard.keys["Elevator trim down"].keycode:controls.setters.setElevatorTrimDown.unset();break;case ges.preferences.keyboard.keys.Brakes.keycode:controls.setters.setBrakes.unset();break;case 84:ui.openChat();break;case 90:controls.states.steerLeft=!1,event.returnValue=!1;break;case 88:controls.states.steerRight=!1,event.returnValue=!1}}},a=setInterval(function(){if("function"==typeof jQuery){var $=jQuery;$.fn.on=function(){var on=$.fn.on;return function(type,fn){for(var i in controlEvents)if(controlEvents.hasOwnProperty(i)&&fn===controls[i])return on.apply(this,[type,controls[i]=controlEvents[i]]);return on.apply(this,arguments)}}(),clearInterval(a)}}),b=setInterval(function(){function noseWheelSteering(aircraftName,kmlObjects){function set(noseWheel,tillerNoseAngle,rudderNoseAngle){return function(){var anim=ges.aircraft.wheels[noseWheel].animations[0];anim.value="steeringAngle",ratio=rudderNoseAngle/(anim.ratio=tillerNoseAngle)}}if(ges.aircraft.kmlObjects===kmlObjects)return setTimeout(function(){noseWheelSteering(aircraftName,kmlObjects)},50),void 0;var ratio,aircrafts={a380:set(4,75,7),md11:set(3,70,10),cessna:set(2,30,8.5),AN140:set(2,35,5),concorde:set(2,60,10),su35:set(4,45,5),dc3:set(0,-45,-3),alphajet:set(2,35,5),zlin:set(2,-30,-2)};(aircrafts[aircraftName]||function(){ratio=1})(),controls.nwAngle=0,controls.updateKeyboardGeneral=function(dt){var throttleIncrement=controls.keyboard.throttleIncrement*dt;controls.states.increaseThrottle?controls.throttle+=throttleIncrement:controls.states.decreaseThrottle&&(controls.throttle-=throttleIncrement);var sensitivity=ges.preferences.keyboard.sensitivity*ges.aircraft.controllers.yaw.sensitivity,yawIncrement=controls.keyboard.yawIncrement*dt*sensitivity*ges.aircraft.controllers.yaw.ratio,notSteering=!1;controls.states.steerLeft?controls.nwAngle=clamp(controls.nwAngle-yawIncrement,-1,1):controls.states.steerRight?controls.nwAngle=clamp(controls.nwAngle+yawIncrement,-1,1):notSteering=!0,controls.states.rudderLeft?(controls.yaw-=yawIncrement,notSteering&&(Math.abs(controls.nwAngle)<ratio?controls.nwAngle=clamp(controls.nwAngle-yawIncrement*ratio,-ratio,ratio):controls.nwAngle-=controls.nwAngle*controls.keyboard.recenterRatio*sensitivity)):controls.states.rudderRight?(controls.yaw+=yawIncrement,notSteering&&(Math.abs(controls.nwAngle)<ratio?controls.nwAngle=clamp(controls.nwAngle+yawIncrement*ratio,-ratio,ratio):controls.nwAngle-=controls.nwAngle*controls.keyboard.recenterRatio*sensitivity)):ges.aircraft.controllers.yaw.recenter&&(controls.yaw-=controls.yaw*controls.keyboard.recenterRatio*sensitivity,notSteering&&(controls.nwAngle-=controls.nwAngle*controls.keyboard.recenterRatio*sensitivity)),ges.aircraft.animationValue.steeringAngle=controls.nwAngle}}"function"==typeof Aircraft&&(V3.duplicate=V3.dup,Aircraft.prototype.load=function(){var load=Aircraft.prototype.load;return function(aircraftName){var oldkmlObjects=ges.aircraft.kmlObjects;load.apply(this,arguments),noseWheelSteering(aircraftName,oldkmlObjects)}}(),clearInterval(b))})}()';top==window?h.appendChild(s):delete s